(()=>{var He=Object.create;var J=Object.defineProperty;var Fe=Object.getOwnPropertyDescriptor;var $e=Object.getOwnPropertyNames;var Ve=Object.getPrototypeOf,Qe=Object.prototype.hasOwnProperty;var Ke=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Ye=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of $e(r))!Qe.call(e,a)&&a!==t&&J(e,a,{get:()=>r[a],enumerable:!(o=Fe(r,a))||o.enumerable});return e};var ze=(e,r,t)=>(t=e!=null?He(Ve(e)):{},Ye(r||!e||!e.__esModule?J(t,"default",{value:e,enumerable:!0}):t,e));var T=(e,r,t)=>new Promise((o,a)=>{var n=f=>{try{u(t.next(f))}catch(p){a(p)}},s=f=>{try{u(t.throw(f))}catch(p){a(p)}},u=f=>f.done?o(f.value):Promise.resolve(f.value).then(n,s);u((t=t.apply(e,r)).next())});var ee=Ke((yo,Z)=>{"use strict";var Xe=/["'&<>]/;Z.exports=Ze;function Ze(e){var r=""+e,t=Xe.exec(r);if(!t)return r;var o,a="",n=0,s=0;for(n=t.index;n<r.length;n++){switch(r.charCodeAt(n)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 39:o="&#39;";break;case 60:o="&lt;";break;case 62:o="&gt;";break;default:continue}s!==n&&(a+=r.substring(s,n)),s=n+1,a+=o}return s!==n?a+r.substring(s,n):a}});var g={me:{id:"",name:""}};var A=document.querySelector(".overlay-container"),k=new Map,Je=0;A.addEventListener("click",e=>{let r=e.target;if(r.hasAttribute("data-popup-id")){let t=r.getAttribute("data-popup-id"),o=r.getAttribute("data-value");X(t,o)}});function X(e,r){var o;let t=k.get(e);t&&A.removeChild(t.dom),k.delete(e),(o=t.options)!=null&&o.callback&&t.options.callback(r),k.size<1&&A.setAttribute("data-active","false")}function x(e,r,t){let o=(Je++).toString(),a=document.createElement("div");a.classList.add("container","container-fadein");let n=[];t!=null&&t.actions?n.push(...t.actions.map(s=>`<input type="button" data-popup-id="${o}" data-value="${s.value}" class="button ${s.class}" value="${s.title}">`)):n.push(`<input type="button" data-popup-id="${o}" data-value="ok" class="button button-outline" value="OK">`),a.innerHTML=`
    <div class="title-h2">${e}</div>
    <div class="dialog-content">${r&&r.length>0?`${r}`:""}</div>
    <div class="dialog-actions">${n.join("")}</div>`,t!=null&&t.alternativeContentDom&&a.querySelector(".dialog-content").appendChild(t.alternativeContentDom),k.set(o,{dom:a,options:t}),A.setAttribute("data-active","true"),A.appendChild(a),t!=null&&t.closeDialogPromise&&t.closeDialogPromise.then(()=>{X(o)})}var $=class{constructor(){this.ws=null;this.listener=new Map;this.listenerId=0}open(){if(this.ws)throw new Error("Socket is already open??");return this.ws=new WebSocket(`${location.protocol==="http:"?"ws:":"wss:"}//${location.host}/`),this.ws.addEventListener("message",r=>{let{type:t,data:o}=JSON.parse(r.data);this.handleMessage(t,o)}),this.ws.addEventListener("close",()=>{x("You were disconnected","The session was closed by the server.",{callback:()=>{location.reload()}})}),new Promise(r=>{this.ws.addEventListener("open",()=>{r()},{once:!0})})}isOpen(){return this.ws!==null}sendMsg(r,t){this.ws.send(JSON.stringify({type:r,data:t}))}on(r,t,o=!1){this.listener.has(r)||this.listener.set(r,[]);let a=this.listenerId++;return this.listener.get(r).push({callback:t,once:o,id:a}),a}once(r,t){return this.on(r,t,!0)}callListeners(r,t){let o=this.listener.get(r);o&&[...o].forEach((a,n)=>{a.callback(t),a.once&&o.splice(n,1)})}off(r,t){let o=this.listener.get(r);if(!o)return;let a=o.findIndex(n=>n.id===t);a>-1&&o.splice(a,1)}handleMessage(r,t){switch(r){case"me":this.callListeners("me",t);break;case"me.game.left":this.callListeners("me.game.left",t);break;case"game.status":this.callListeners("game.status",t);break;case"game.playerlist":this.callListeners("game.playerlist",t);break;case"game.question":this.callListeners("game.question",t);break;case"game.question.active":this.callListeners("game.question.active",t);break;case"game.question.answers":this.callListeners("game.question.answers",t);break;case"generic.error":this.callListeners("generic.error",t);break}}},i=new $;var B=ze(ee(),1);var et=typeof global=="object"&&global&&global.Object===Object&&global,C=et;var tt=typeof self=="object"&&self&&self.Object===Object&&self,rt=C||tt||Function("return this")(),d=rt;var ot=d.Symbol,v=ot;var te=Object.prototype,at=te.hasOwnProperty,st=te.toString,L=v?v.toStringTag:void 0;function it(e){var r=at.call(e,L),t=e[L];try{e[L]=void 0;var o=!0}catch{}var a=st.call(e);return o&&(r?e[L]=t:delete e[L]),a}var re=it;var nt=Object.prototype,ft=nt.toString;function lt(e){return ft.call(e)}var oe=lt;var ut="[object Null]",pt="[object Undefined]",ae=v?v.toStringTag:void 0;function dt(e){return e==null?e===void 0?pt:ut:ae&&ae in Object(e)?re(e):oe(e)}var b=dt;function mt(e){return e!=null&&typeof e=="object"}var E=mt;function ct(e,r){for(var t=-1,o=e==null?0:e.length,a=Array(o);++t<o;)a[t]=r(e[t],t,e);return a}var se=ct;var xt=Array.isArray,ie=xt;function bt(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var _=bt;var yt="[object AsyncFunction]",ht="[object Function]",gt="[object GeneratorFunction]",vt="[object Proxy]";function Et(e){if(!_(e))return!1;var r=b(e);return r==ht||r==gt||r==yt||r==vt}var O=Et;var St=d["__core-js_shared__"],R=St;var ne=function(){var e=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Tt(e){return!!ne&&ne in e}var fe=Tt;var At=Function.prototype,Lt=At.toString;function wt(e){if(e!=null){try{return Lt.call(e)}catch{}try{return e+""}catch{}}return""}var y=wt;var Mt=/[\\^$.*+?()[\]{}|]/g,kt=/^\[object .+?Constructor\]$/,It=Function.prototype,Ct=Object.prototype,_t=It.toString,Ot=Ct.hasOwnProperty,Rt=RegExp("^"+_t.call(Ot).replace(Mt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Pt(e){if(!_(e)||fe(e))return!1;var r=O(e)?Rt:kt;return r.test(y(e))}var le=Pt;function jt(e,r){return e?.[r]}var ue=jt;function Gt(e,r){var t=ue(e,r);return le(t)?t:void 0}var c=Gt;var Nt=c(d,"WeakMap"),P=Nt;var qt=9007199254740991,Dt=/^(?:0|[1-9]\d*)$/;function Bt(e,r){var t=typeof e;return r=r??qt,!!r&&(t=="number"||t!="symbol"&&Dt.test(e))&&e>-1&&e%1==0&&e<r}var pe=Bt;var Ut=9007199254740991;function Wt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ut}var j=Wt;function Ht(e){return e!=null&&j(e.length)&&!O(e)}var de=Ht;var Ft=Object.prototype;function $t(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||Ft;return e===t}var me=$t;function Vt(e,r){for(var t=-1,o=Array(e);++t<e;)o[t]=r(t);return o}var ce=Vt;var Qt="[object Arguments]";function Kt(e){return E(e)&&b(e)==Qt}var V=Kt;var xe=Object.prototype,Yt=xe.hasOwnProperty,zt=xe.propertyIsEnumerable,Jt=V(function(){return arguments}())?V:function(e){return E(e)&&Yt.call(e,"callee")&&!zt.call(e,"callee")},be=Jt;function Xt(){return!1}var ye=Xt;var ve=typeof exports=="object"&&exports&&!exports.nodeType&&exports,he=ve&&typeof module=="object"&&module&&!module.nodeType&&module,Zt=he&&he.exports===ve,ge=Zt?d.Buffer:void 0,er=ge?ge.isBuffer:void 0,tr=er||ye,Ee=tr;var rr="[object Arguments]",or="[object Array]",ar="[object Boolean]",sr="[object Date]",ir="[object Error]",nr="[object Function]",fr="[object Map]",lr="[object Number]",ur="[object Object]",pr="[object RegExp]",dr="[object Set]",mr="[object String]",cr="[object WeakMap]",xr="[object ArrayBuffer]",br="[object DataView]",yr="[object Float32Array]",hr="[object Float64Array]",gr="[object Int8Array]",vr="[object Int16Array]",Er="[object Int32Array]",Sr="[object Uint8Array]",Tr="[object Uint8ClampedArray]",Ar="[object Uint16Array]",Lr="[object Uint32Array]",l={};l[yr]=l[hr]=l[gr]=l[vr]=l[Er]=l[Sr]=l[Tr]=l[Ar]=l[Lr]=!0;l[rr]=l[or]=l[xr]=l[ar]=l[br]=l[sr]=l[ir]=l[nr]=l[fr]=l[lr]=l[ur]=l[pr]=l[dr]=l[mr]=l[cr]=!1;function wr(e){return E(e)&&j(e.length)&&!!l[b(e)]}var Se=wr;function Mr(e){return function(r){return e(r)}}var Te=Mr;var Ae=typeof exports=="object"&&exports&&!exports.nodeType&&exports,w=Ae&&typeof module=="object"&&module&&!module.nodeType&&module,kr=w&&w.exports===Ae,Q=kr&&C.process,Ir=function(){try{var e=w&&w.require&&w.require("util").types;return e||Q&&Q.binding&&Q.binding("util")}catch{}}(),K=Ir;var Le=K&&K.isTypedArray,Cr=Le?Te(Le):Se,we=Cr;var _r=Object.prototype,Or=_r.hasOwnProperty;function Rr(e,r){var t=ie(e),o=!t&&be(e),a=!t&&!o&&Ee(e),n=!t&&!o&&!a&&we(e),s=t||o||a||n,u=s?ce(e.length,String):[],f=u.length;for(var p in e)(r||Or.call(e,p))&&!(s&&(p=="length"||a&&(p=="offset"||p=="parent")||n&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||pe(p,f)))&&u.push(p);return u}var Me=Rr;function Pr(e,r){return function(t){return e(r(t))}}var ke=Pr;var jr=ke(Object.keys,Object),Ie=jr;var Gr=Object.prototype,Nr=Gr.hasOwnProperty;function qr(e){if(!me(e))return Ie(e);var r=[];for(var t in Object(e))Nr.call(e,t)&&t!="constructor"&&r.push(t);return r}var Ce=qr;function Dr(e){return de(e)?Me(e):Ce(e)}var _e=Dr;var Br=c(d,"Map"),G=Br;var Ur=c(d,"DataView"),N=Ur;var Wr=c(d,"Promise"),q=Wr;var Hr=c(d,"Set"),D=Hr;var Oe="[object Map]",Fr="[object Object]",Re="[object Promise]",Pe="[object Set]",je="[object WeakMap]",Ge="[object DataView]",$r=y(N),Vr=y(G),Qr=y(q),Kr=y(D),Yr=y(P),h=b;(N&&h(new N(new ArrayBuffer(1)))!=Ge||G&&h(new G)!=Oe||q&&h(q.resolve())!=Re||D&&h(new D)!=Pe||P&&h(new P)!=je)&&(h=function(e){var r=b(e),t=r==Fr?e.constructor:void 0,o=t?y(t):"";if(o)switch(o){case $r:return Ge;case Vr:return Oe;case Qr:return Re;case Kr:return Pe;case Yr:return je}return r});var Ne=h;function zr(e){var r=-1,t=Array(e.size);return e.forEach(function(o,a){t[++r]=[a,o]}),t}var qe=zr;function Jr(e,r){return se(r,function(t){return[t,e[t]]})}var De=Jr;function Xr(e){var r=-1,t=Array(e.size);return e.forEach(function(o){t[++r]=[o,o]}),t}var Be=Xr;var Zr="[object Map]",eo="[object Set]";function to(e){return function(r){var t=Ne(r);return t==Zr?qe(r):t==eo?Be(r):De(r,e(r))}}var Ue=to;var ro=Ue(_e),Y=ro;var M=null,m=class{constructor(){this.killWhenInactive=!0}setup(){this.domRef=document.createElement("div"),this.domRef.classList.add("screen"),this.domRef.setAttribute("data-screen-active","next")}render(){this.domRef.innerHTML=this.template(),document.body.querySelector(".screen-container").appendChild(this.domRef)}template(){return""}setActive(){M&&M.setInactive(),this.domRef.setAttribute("data-screen-active","cur"),M=this}setInactive(){this.domRef.setAttribute("data-screen-active","prev"),this.killWhenInactive&&this.die()}die(){M===this&&(M=null),window.setTimeout(()=>{this.domRef.remove()},1e3)}static spawnScreen(r){return r.setup(),r.render(),r.init(),r}};var U=class extends m{constructor(t,o,a){super();this.questionId=null;this.ownAnwser=null;this.questionDone=!1;this.lobby=t,this.questionId=o,this.question=a}init(){this.domRef.addEventListener("click",t=>{let o=t.target;if(!o.hasAttribute("data-answer"))return;let a=o.getAttribute("data-answer");this.ownAnwser=parseInt(a),i.sendMsg("game.question.answer",{questionId:this.questionId,answer:this.ownAnwser}),this.domRef.querySelectorAll("[data-answer-selected=true]").forEach(n=>{n.removeAttribute("data-answer-selected")}),o.setAttribute("data-answer-selected","true")}),this.timerDOM=this.domRef.querySelector(".question-timer")}setActive(){super.setActive(),this.timerStarted=Date.now(),window.requestAnimationFrame(()=>{this.updateTimer()})}updateTimer(){let t=Math.ceil((this.timerStarted+this.question.timeoutMs-Date.now())/1e3),o=Math.max(1-(Date.now()-this.timerStarted)/this.question.timeoutMs,0);this.questionDone&&(o=0),this.timerDOM.style.transform=`scaleX(${o})`,(t>0||!this.questionDone)&&window.requestAnimationFrame(()=>{this.updateTimer()})}showAnswers(t,o){let{correct:a,wrong:n}=t,s=Y(o);a.forEach(u=>{this.domRef.querySelector(`li[data-answer="${u}"]`).setAttribute("data-answer-correct","true")}),n.includes(this.ownAnwser)&&this.domRef.querySelector(`li[data-answer="${this.ownAnwser}"]`).setAttribute("data-answer-correct","false"),s.forEach(([u,f])=>{let p=this.lobby.getPlayerEntryById(u).name,We=this.domRef.querySelector(`li[data-answer="${f}"] > .answer-others-container`),F=document.createElement("div");F.classList.add("answer-others","skewed-tag"),F.innerHTML=`<span>${p}</span>`,We.appendChild(F)}),this.questionDone=!0}template(){let t=this.question.question,o=this.question.answers,a=!!this.question.question.image;return`
    <div><!-- empty div for spacing --></div>
    <div class="question-wrapper">
      <div class="container question-container">
      <div class="skewed-tag skewed-tag-big tag-question-number">${this.questionId+1}</div>
        ${a?`<img class="question-image" src="${(0,B.default)(t.image)}">`:""}
        <div class="question-title title-h3">${(0,B.default)(t.title)}</div>
        <div class="question-timer"></div>
      </div>
      <ul class="answers">
        ${o.map((n,s)=>`<li data-answer="${s}">
            ${(0,B.default)(n)}
            <div class="answer-others-container"></div>
          </li>`).join("")}
      </ul>
    </div>`}};var W=class extends m{constructor(){super();this.killWhenInactive=!1;this.currentLobbyStatus=null;this.lobbyId="";this.selfReady=!1;this.playerlist=[];this.questions=new Map}init(){this.readyButton=this.domRef.querySelector("#lobby-ready");let t=this.domRef.querySelector("#copy-lobby-id"),o=this.domRef.querySelector("#toggle-lobby-settings"),a=this.domRef.querySelector("#lobby-back-button");document.addEventListener("keydown",this.keydown.bind(this)),document.addEventListener("keyup",this.keyup.bind(this));let n=this.domRef.querySelector(".playerlist");this.scoreboardDom=document.createElement("div"),this.scoreboardDom.classList.add("playerlist","playerlist-scoreboard"),this.statusListener=i.on("game.status",({id:s,status:u})=>{if(this.lobbyId=s,this.domRef.querySelector("#lobby-id").innerHTML=s,this.currentLobbyStatus&&this.currentLobbyStatus!==u)switch(u){case"IN_GAME":break;case"LOBBY":this.scoreboardCloseCallback&&(this.scoreboardCloseCallback(),this.scoreboardCloseCallback=null),x("Final Scoreboard",void 0,{actions:[{title:"Back to Lobby",value:"back",class:"button-outline"}],alternativeContentDom:this.scoreboardDom,callback:()=>{this.setActive()}});break}this.currentLobbyStatus=u,this.updateReadyButton()}),this.playerlistListener=i.on("game.playerlist",({playerlist:s})=>{this.playerlist=s,n.innerHTML=[...this.playerlist].map(f=>`<li class="playerlist-entry">
                ${f.name} <!-- (${f.score}) -->
                ${f.ready?'<div class="skewed-tag skewed-tag-primary tag-ready">Ready</div>':'<div class="skewed-tag skewed-tag-error tag-ready">Not Ready</div>'}
              </li>`).join(""),this.scoreboardDom.innerHTML=[...this.playerlist].sort((f,p)=>p.score-f.score).map(f=>`<li class="playerlist-entry">
                ${f.name}
                <div class="skewed-tag ${f.playerId===g.me.id?"skewed-tag-primary":""} tag-score">${f.score}</div>
              </li>`).join("");let u=s.find(f=>f.playerId===g.me.id);this.selfReady=u==null?void 0:u.ready,this.updateReadyButton()}),this.questionListener=i.on("game.question",({id:s,question:u})=>{let f=m.spawnScreen(new U(this,s,u));this.questions.set(s,f)}),this.questionActiveListener=i.on("game.question.active",({id:s})=>{this.questions.get(s).setActive()}),this.questionAnswersListener=i.on("game.question.answers",({id:s,answers:u,playerAnswers:f})=>{this.questions.get(s).showAnswers(u,f)}),this.selfLeftListener=i.on("me.game.left",({reason:s})=>{console.log("CALLED SELF LEFT LISTENER"),this.leaveLobby(),s==="KICKED_INACTIVITY"&&x("You were kicked","You were kicked from the game due to inactivity.")}),this.readyButton.addEventListener("click",s=>{this.selfReady=!this.selfReady,i.sendMsg("me.ready",{ready:this.selfReady}),this.updateReadyButton()}),t.addEventListener("click",s=>{s.preventDefault(),navigator.clipboard.writeText(this.lobbyId)}),o.addEventListener("click",s=>{s.preventDefault(),x("WIP",void 0,{actions:[{title:"Cancel",value:"cancel",class:"button-outline"},{title:"Ok!",value:"ok",class:"button-primary"}]})}),a.addEventListener("click",s=>{s.preventDefault(),i.sendMsg("game.leave")})}updateReadyButton(){this.readyButton.value=this.currentLobbyStatus==="IN_GAME"?"GAME STARTING":this.selfReady?"NOT Ready":"READY",this.readyButton.setAttribute("data-active",this.selfReady+""),this.readyButton.disabled=this.currentLobbyStatus==="IN_GAME"}getPlayerEntryById(t){return this.playerlist.find(o=>o.playerId===t)}leaveLobby(){m.spawnScreen(new S).setActive(),this.die()}template(){return`
    <h1 class="title-h1">LOBBY</h1>
    <section class="lobby-wrapper">
      <div class="multiple-container-wrapper">
        <div class="container" style="display:none;">
          <div class="title-h2">TODO: SETTINGS</div>
        </div>

        <div class="container lobby-container">
          <div class="title-h3 lobby-title">
            Lobby Code: <br>
            <span class="title-h2">
            <span id="lobby-id">${this.lobbyId}</span>&nbsp;
              <a id="copy-lobby-id" title="Copy Lobby ID" class="button button-outline button-icon-inline" style="vertical-align: middle; margin-top: -8px">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M3.9 12C3.9 10.29 5.29 8.9 7 8.9H11V7H7C5.67392 7 4.40215 7.52678 3.46447 8.46447C2.52678 9.40215 2 10.6739 2 12C2 13.3261 2.52678 14.5979 3.46447 15.5355C4.40215 16.4732 5.67392 17 7 17H11V15.1H7C5.29 15.1 3.9 13.71 3.9 12ZM8 13H16V11H8V13ZM17 7H13V8.9H17C18.71 8.9 20.1 10.29 20.1 12C20.1 13.71 18.71 15.1 17 15.1H13V17H17C18.3261 17 19.5979 16.4732 20.5355 15.5355C21.4732 14.5979 22 13.3261 22 12C22 10.6739 21.4732 9.40215 20.5355 8.46447C19.5979 7.52678 18.3261 7 17 7Z" fill="currentColor"/>
                </svg>
              </a>
            </span>
          </div>
          <ul class="playerlist"></ul>
        </div>
      </div>
      <div class="lobby-action">
        <a id="toggle-lobby-settings" class="button button-outline button-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12.0001 15.5C11.0718 15.5 10.1816 15.1313 9.52521 14.4749C8.86883 13.8185 8.50008 12.9283 8.50008 12C8.50008 11.0717 8.86883 10.1815 9.52521 9.52513C10.1816 8.86875 11.0718 8.5 12.0001 8.5C12.9283 8.5 13.8186 8.86875 14.475 9.52513C15.1313 10.1815 15.5001 11.0717 15.5001 12C15.5001 12.9283 15.1313 13.8185 14.475 14.4749C13.8186 15.1313 12.9283 15.5 12.0001 15.5ZM19.4301 12.97C19.4701 12.65 19.5001 12.33 19.5001 12C19.5001 11.67 19.4701 11.34 19.4301 11L21.5401 9.37C21.7301 9.22 21.7801 8.95 21.6601 8.73L19.6601 5.27C19.5401 5.05 19.2701 4.96 19.0501 5.05L16.5601 6.05C16.0401 5.66 15.5001 5.32 14.8701 5.07L14.5001 2.42C14.4601 2.18 14.2501 2 14.0001 2H10.0001C9.75008 2 9.54008 2.18 9.50008 2.42L9.13008 5.07C8.50008 5.32 7.96008 5.66 7.44008 6.05L4.95008 5.05C4.73008 4.96 4.46008 5.05 4.34008 5.27L2.34008 8.73C2.21008 8.95 2.27008 9.22 2.46008 9.37L4.57008 11C4.53008 11.34 4.50008 11.67 4.50008 12C4.50008 12.33 4.53008 12.65 4.57008 12.97L2.46008 14.63C2.27008 14.78 2.21008 15.05 2.34008 15.27L4.34008 18.73C4.46008 18.95 4.73008 19.03 4.95008 18.95L7.44008 17.94C7.96008 18.34 8.50008 18.68 9.13008 18.93L9.50008 21.58C9.54008 21.82 9.75008 22 10.0001 22H14.0001C14.2501 22 14.4601 21.82 14.5001 21.58L14.8701 18.93C15.5001 18.67 16.0401 18.34 16.5601 17.94L19.0501 18.95C19.2701 19.03 19.5401 18.95 19.6601 18.73L21.6601 15.27C21.7801 15.05 21.7301 14.78 21.5401 14.63L19.4301 12.97Z" fill="currentColor"/>
          </svg>
        </a>
        <input type="button" class="button button-primary" id="lobby-ready" value="Ready!" disabled=true>
      </div>
    </section>
    <div class="bottom-container">
      <input type="button" id="lobby-back-button" class="button button-outline" value="Back">
    </div>`}keydown(t){if(this.currentLobbyStatus!=="IN_GAME"||t.key!=="Tab"||(t.preventDefault(),t.stopPropagation(),t.repeat))return;this.scoreboardCloseCallback&&(t.preventDefault(),this.scoreboardCloseCallback(),this.scoreboardCloseCallback=null);let o=new Promise(a=>{this.scoreboardCloseCallback=a});x("Scoreboard",void 0,{actions:[],closeDialogPromise:o,alternativeContentDom:this.scoreboardDom})}keyup(t){t.key==="Tab"&&this.scoreboardCloseCallback&&(t.preventDefault(),this.scoreboardCloseCallback(),this.scoreboardCloseCallback=null)}die(){super.die(),i.off("game.status",this.statusListener),i.off("game.playerlist",this.playerlistListener),i.off("game.question",this.questionListener),i.off("game.question.active",this.questionActiveListener),i.off("game.question.answers",this.questionAnswersListener),i.off("me.game.left",this.selfLeftListener),this.questions.forEach(t=>{t.die()}),document.removeEventListener("keydown",this.keydown),document.removeEventListener("keyup",this.keyup)}};var S=class extends m{init(){this.domRef.querySelector("form[name=create]").addEventListener("submit",o=>T(this,null,function*(){o.preventDefault(),this.submitDisabled(!0),i.sendMsg("game.create")})),this.domRef.querySelector("form[name=join]").addEventListener("submit",o=>T(this,null,function*(){o.preventDefault(),document.activeElement.blur();let a=o.target["lobby-id"].value;this.submitDisabled(!0),i.sendMsg("game.join",{id:a})})),this.errListener=i.on("generic.error",({title:o})=>{console.log("called err"),x(o),this.submitDisabled(!1)});let t=m.spawnScreen(new W);this.joinedListener=i.once("game.status",({id:o,status:a})=>{i.off("generic.error",this.errListener),t.setActive()})}submitDisabled(t){this.domRef.querySelectorAll("input[type=submit]").forEach(o=>o.disabled=t)}die(){super.die(),i.off("generic.error",this.errListener),i.off("game.status",this.joinedListener)}template(){return`
    <h1 class="title-h1">PLAY</h1>
    <section class="multiple-container-wrapper">
      <div class="container">
        <div class="title-h2">Create Lobby</div>
        <form name="create">
          <input type="submit" class="button button-primary" name="create-new" value="Create New">
        </form>
      </div>

      <label class="container">
        <div class="title-h2">Join Lobby</div>
        <form class="combined-form" name="join">
          <input type="text" name="lobby-id" autocomplete="off" required minlength=4 placeholder="XXXX">
          <input type="submit" class="button button-primary" name="join" value="Join">
        </form>
      </label>
    </section>`}};var H=class extends m{init(){this.domRef.querySelector("form").addEventListener("submit",t=>T(this,null,function*(){t.preventDefault();let o=t.target.submit;o.disabled=!0;let a=t.target.username.value;i.isOpen()||(yield i.open()),i.sendMsg("me.change_name",{name:a}),m.spawnScreen(new S).setActive()}))}setActive(){super.setActive(),this.domRef.querySelector("input[name=username]").focus({preventScroll:!0})}template(){return`
    <h1 class="title-h1">Login</h1>
    <div class="container">
      <div class="title-h2">Choose your username</div>
      <form class="combined-form" name="login">
        <input type="text" name="username" autocomplete="off" minlength=3 maxlength=12 required placeholder="username">
        <input type="submit" class="button button-primary" name="submit" value="Connect!">
      </form>
    </div>`}die(){super.die(),i.off("generic.error",this.errListener)}};i.on("me",e=>{g.me.id=e.id,g.me.name=e.name});var oo=m.spawnScreen(new H);oo.setActive();})();
/*! Bundled license information:

escape-html/index.js:
  (*!
   * escape-html
   * Copyright(c) 2012-2013 TJ Holowaychuk
   * Copyright(c) 2015 Andreas Lubbe
   * Copyright(c) 2015 Tiancheng "Timothy" Gu
   * MIT Licensed
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
